# テーブル定義書レビュー課題1
## 全体
- PKのカラム名は「id」と書きましょう
- 在庫数テーブルに関して記述しましょう
- 外部キーはテーブル名単数形_idという命名規則ですので以下を変更しましょう
  - products_id ⇒ product_id 
  - buy_details_id ⇒ buy_detail_id
  - [check] 何故"products_id"ではNGなのでしょうか。理由を追記しましょう。
    - [done] 修正しました。
- 全てのテーブルで"created_at"、"updated_at"の説明欄が同じになっていますので見直しましょう

以下のテーブルでこちらの修正点があります
- テーブル名の情報はカラム名に入れなくていいです。
- カラム名は省略してはいけません
  - Users(user_l_name ⇒ last_nameなど)
  - Admin(admin_email ⇒ emailなど)
  - Products(cd_title ⇒ titleなど)
  - Discs(track_num ⇒ track_numberなど)
  - Songs
  - Labels
  - Artists
  - Genre
  - Cart item
  - Buy details
  - Buy
  
  
  
- [check]カラム名やテーブル名の規則については、全体の部分でまとめて指摘すると良いでしょう。

## Admin
- テーブル名は複数形にしましょう
- admin_idにAUTO INCREMENTが適用しましょう
- admin_idにPKがチェックされていません
- admin_idにINDEXが適用されていません


## Users
- 郵便番号・電話番号は先頭の0はどのように表現しますか？
  基本的にこれらの項目は、
  * 先頭のゼロに意味がある
  * 計算に使う値ではない
  という理由で、integerでは持たないことが多いです。
  - [check]データ型について直接指摘しましょう。NGな理由も合わせて説明すること。
    - [done] 修正しました
- 配送先住所はここに保存されて大丈夫ですか？
- 退会ステータスは論理削除されたかどうかのフラグの役割を持ちます。
  その際退会したか、退会していないかの2択を表すものなのでboolean型が好ましいです。
  - [check]boolean型です。また、何故boolean型が望ましいか、理由も合わせて説明しましょう。
    - [done] 修正いたしました。
- 名・名カナがNOT NULLが外れています

## Products
- FKにindexを追加しましょう
- discとのリレーションを再度確認しましょう
- 下記はFKですので、FKに○をお願いします
  - genre_id
  - label_id
  - artist_id
    - [check]FKはまとめて「下記はFKですので、FKに○をお願いします」とすると良いでしょう。
    - [done]修正いたしました
- 在庫数カラム、在庫ステータスカラムは不要です。テーブルを作成しましょう。
* 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると
  計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
  入荷したタイミングで入荷数を入れられるようにすれば楽です。
* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
　- 入荷数の証拠にもなります。
  - [check]何故テーブルが必要なのか、理由を追記しましょう
    - [done] 修正いたしました。

## Discs
- また、track_numberの意味を考えてみると、ディスクごとの曲順を表す番号となります。
     したがって、このテーブルではなく、songsテーブルに持たせる必要があります。
- PKにINDEXが適用されていません
- products_idにINDEXが適用されていません。
- 同一商品で異なるディスクかどうかの判断ができません。ディスク名をカラムとして持たせる必要があります。

## Songs
- PKがありません
- FKにAUTO INCREMENTは適用しません
- FKにINDEXは必要です

## Labels
- PKがありません
- FKにINDEXは必要です
- products_idはいりません

## Artists
- PKがありません
- artist名カラムのデータ型は文字列です
- FKにAUTO INCREMENTは適用しません
- productsとのリレーションを確認しましょう

## Genre
- テーブル名が単数形
- PKがありません
- FKにAUTO INCREMENTは適用しません
- productsとのリレーションを確認しましょう

## Cart item
- PKがありません
- テーブル名は複数形です
- テーブル名はスネークケースで書きましょう
- FKにAUTO INCREMENTは適用しません
- products_idのデータ型はintegerです
- カラムはスネークケースで書きましょう
- 購入枚数を表すカラム名として"buy_number"はそもそも適切でしょうか。
    直訳すると「番号を買う」「購入番号」となる気がします。数量を表す単語として、もう少し適切なものはないか、考えてみましょう。
- subtotalカラムは数量と価格で計算が容易なためカラムとして持たなくていいです。

# Buy details
- テーブル名はスネークケースで書きましょう
- 管理者目線で考えましょう
  - Buy detailis ⇒ Order_details
- カラムはスネークケースで書きましょう
- また購入枚数を表すカラム名として"buy_number"はそもそも適切でしょうか。
    直訳すると「番号を買う」「購入番号」となる気がします。数量を表す単語として、もう少し適切なものはないか、考えてみましょう。

## Buy
- テーブル名は複数形です
- 管理者目線で考えましょう
  - Buy ⇒ Orders
- FKにINDEXは必要です
- payカラムは名前で内容が伝わりづらいので名前を変えましょう
- 支払い合計カラムの命名が不十分です
  - stock ⇒ total_payment
- buy_atとcreated_atを分けた理由は何ですか？
  - [check]違いはなんですか？→分けた理由はなんですか？
    - [done]修正いたしました
- 支払い方法はenumで管理しましょう理由は以下の二点です
  - よほどのことがない限りステータスの変更がない
  - 情報の種類が少ないためテーブルで作る必要がない
  - [check]なぜenumの方が良いのか、理由を追記しましょう。
    - [done] 
- buy_detailカラムを持っていますが、リレーションは大丈夫でしょうか。


-----------------------------------------------------------------------------------
[check]テーブル定義書1のレビューを参考に、理由の追記が必要な部分を再考してみましょう。
[done]修正いたしました

# テーブル定義書レビュー課題2
## 全体
- PKのカラム名はidです
- sellテーブルとsell_detailsテーブルのリレーション関係を再度確認しましょう
- 在庫数テーブルに関して記述しましょう
- 外部キーはテーブル名単数形_idという命名規則ですので以下を変更しましょう
  - products_id ⇒ product_id 
  - sell_details_id ⇒ sell_detail_id

以下のテーブルでこちらの修正点があります
- テーブル名の情報はカラム名に入れなくていいです。
- カラム名は省略してはいけません
  - Users(user_l_name ⇒ last_nameなど)
  - Admin(admin_email ⇒ emailなど)
  - Ships
  - Products
  - Discs
  - Songs
  - Labels
  - Artists
  - Genre
  - Cart item
  - Sell details
  - Sell
 





## admins
- admin_idにPKが○になっていません
- admin_idにINDEXが適用されていません

## users
- テーブル名の情報はカラム名に入れなくていいです。
  - これ以外にもいくつかあるので考えてみてください。

## ships
- PKにINDEXが適用されていません
- FKにINDEXが適用されていません

## products
- FKにindexがありません
- 在庫数カラム、在庫ステータスカラムは不要です。テーブルを作成しましょう。
* 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると
  計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
  入荷したタイミングで入荷数を入れられるようにすれば楽です。
* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
　- 入荷数の証拠にもなります。

## discs
- PKにINDEXが適用されていません
- FKにINDEXが適用されていません


## cart items
- テーブル名はスネークケースで書きましょう
- products_idのデータ型はintegerです
- カラムはスネークケースで書きましょう


# sell_details
- 商品IDのFK覧に○がないです
- FKにINDEXは必要です

## sells
- PKにINDEXは必要です
- FKにINDEXは必要です
- payカラムは名前で内容が伝わらない
