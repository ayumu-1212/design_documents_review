# ERDレビュー課題1
## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日の記述もお願いいたします。もし持たないのであれば理由を教えてください。
- 発送先はエンドユーザーが複数登録できるのが要件のため、決済テーブルにあるだけでは不十分です。
- アーティスト、レーベル、ジャンル、曲、ディスクに関する情報をどこに保存しますか？
- 購入後に値下げが起こった場合、購入時の価格は確認できますか。決済の詳細に関するテーブルを作る必要があります。
- 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。

## 管理者
- 管理者テーブルとエンドユーザーテーブル、商品テーブルにリレーションがありますが、理由はありますか。
  - [check] アソシエーション→リレーションに修正しましょう。
    アソシエーションとは、RailsなどのMVCフレームワークにおける「モデル」同士の関係性を言い表す言葉です。
    今回、ER図(ちょっとダサいですが、受講生にはER図と伝えているので、この表記で統一しましょう)では、あくまでもエンティティ(テーブル)同士の関係性を
    図示する形になりますが、その場合関連性については「リレーション」と言います。
    - [done] なるほど、勉強になりました。修正しました。
    
## エンドユーザー
-  エンドユーザが退会した場合、該当のレコードはどうなりますか。

## 商品
- 商品が削除された場合、該当のレコードはどうなりますか。
- 発売日はどのように管理しますか。
- 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
↓口頭で説明
------------------------------------------------------------------------------------------------
* 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると
  計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
  入荷したタイミングで入荷数を入れられるようにすれば楽です。
* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
　- 入荷数の証拠にもなります。
 -----------------------------------------------------------------------------------------------
- 同一商品に複数枚ディスクが存在した場合の登録方法は、このER図で考慮されていますか？
  - [add] 同一商品に複数枚ディスクが存在した場合の登録方法は、このER図で考慮されていますか？
    - [done] 追加しました。
- ステータス(取り扱い)は、第三者から見て何のステータスを表しているかわかりますか？
  - [add] ステータス(取り扱い)は、第三者から見て何のステータスを表しているかわかりますか？
    - [done]修正いたしました。
    
## カート
- カートテーブルという命名ですが、表現されているのは「カートの中身」かと思います。
カートは一つ、その中に入っている商品は複数、というイメージかと思いますので、
テーブル名を「カートアイテム」「カート内商品」のような命名にすると良いかと思います。
  - [check] 問題提起で返す項目の場合、「本来であればどうあってほしい」の部分も明記しておくと、あとでレビューが書きやすくなります。
    - [done] 修正いたしました。
- ジャケット画像カラム、シングル/アルバム名カラムは紐づいている商品テーブルとは別に作成しますか？
  - [check] 指摘事項はOKですが、「なおXXしますか？」という言い方はちょっとプレッシャーを感じるので、違う言い方を考えましょう。
    - [done]修正いたしました。
- 合計金額カラムは数量と単価で簡単に計算可能なためこのテーブルでは不要です。
- PKが「注文ID」となっており、テーブル名と乖離しています。
  - [add] PKが「注文ID」となっており、テーブル名と乖離しています。
    - [done]追加しました。
- どのユーザーのカートなのか、どのように判断しますか？
  - [add] どのユーザーのカートなのか、どのように判断しますか？
    - [done] 追加しました
    
## 決済
- カートテーブルとのリレーションがありますが理由はありますか？
- 配送先郵便番号、配送先名前、送料、消費税、請求総額に関する情報はどのように保存しますか？
  - [check] カートとのリレーションがあるのがNGであること、加えてカラムが必要であることを分けて記載すると良いでしょう。最終的に、受講生も理解しやすくなると思います。
    - [done]追加しました
- 購入日カラムはレコードが作成されたときの時刻を入れるカラムなので登録日カラムで代替可能です。
  - [add] 購入日カラムは別のカラムで代替できます。何で代替できるかを考え、指摘項目に追加してください。
    - [done] 追加しました
- 管理者目線で考えると「決済」というテーブル名は適切でしょうか。
  - [add] 「決済」というテーブル名は適切でしょうか。
    - [done] 修正しました。

## 購入履歴
- PKがありません
- 商品はまとめて送るので、発送状況ステータスのみを持つ購入履歴テーブルと決済テーブルを分ける必要がありません
- 購入した商品はどこで確認できるか不明ですので、新しいテーブルの作成や、テーブルの再編を行う必要があります。
  - [add] 購入した商品はどこで確認できるか不明ですので、新しいテーブルの作成や、テーブルの再編を行う必要があります。
    - [done] 追加しました

-----------------------------------------------------------------------------------------------------------


# ERDレビュー課題2
## 全体
- 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、どのように実現しますか。

## 曲名
- 「シングルアルバム内の曲名」というカラムは実際のカラム名はどうされますか？
- ディスクとのリレーションの関係性をもう一度考えてみましょう
- 曲順を管理するカラム(トラックナンバー)がありません

## ディスク
- 曲名とのリレーションの関係性をもう一度考えてみましょう
- 商品とのリレーションの関係性をもう一度考えてみましょう
- トラックNoとは「曲順の番号」の意味ですので、このカラム名でこのテーブルに属性として持たせるのは不適切です。
  - [add] トラックNoというカラムがありますが、このテーブルに属性として持たせるのは不適切です。どのテーブルに移したら良いか考え、レビュー項目に追記してください。
    - [done] 追加しました。

## ジャンル
- 「ジャンル」というカラムは実際のカラム名はどうされますか？

## レーベル
- 「レーベル」というカラムは実際のカラム名はどうされますか？

## 管理者
- PKがありません
- 管理者テーブルとエンドユーザーテーブル、商品テーブルにリレーションがありますが、理由はありますか。

## エンドユーザー
- 名カラムがありません
- PKが「ユーザーID」となっています。
  - [add]PKが「ユーザーID」となっています。
    - [done] 追加しました

## 商品
- ディスクとのリレーションの関係性をもう一度考えてみましょう
- ディスクテーブルのデータから算出できるデータかと思いますが、
このカラムを持っている理由はありますか？
- 商品が削除された場合、該当のレコードはどうなりますか。
- 発売日はどのように管理しますか。
- 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
↓口頭で説明
------------------------------------------------------------------------------------------------
* 例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると
  計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
  入荷したタイミングで入荷数を入れられるようにすれば楽です。
* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。
　- 入荷数の証拠にもなります。
 -----------------------------------------------------------------------------------------------

## カートアイテム
- 小計金額カラムは数量と単価で簡単に計算可能なためこのテーブルでは不要です。
- PKが存在しません
  - [add]PKが存在しません
    - [done] 追加しました

## 購入
- 管理者目線で考えると「購入」というテーブル名は適切でしょうか。
- 購入詳細とのリレーションの関係性をもう一度考えてみましょう
- created_atと同日になるかと思いますが、別で持った理由はありますか。
（間違いではないので、理由があれば知りたいです）
- 配送先氏名、消費税に関するカラムがありません
- 配送状況はどのように管理しますか
  - [add]配送状況はどのように管理しますか
    - [done] 追加しました
    
## 購入詳細
- 購入IDのFKがありません
- 管理者目線で考えると「購入詳細」というテーブル名は適切でしょうか。
- 購入とのリレーションの関係性をもう一度考えてみましょう
- 何を購入したかの情報はどのように管理しますか？

