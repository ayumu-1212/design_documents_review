# ER図1 レビュー文章化
## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日がありません。
- 商品が入荷された場合、該当するレコードはどうなりますか。
- 

## エンドユーザ
- 管理者とリレーションがあるのはなぜでしょうか。
- エンドユーザが退会した場合、該当するレコードはどうなりますか。現状のままではユーザが退会した場合、データベースから該当するユーザーの情報が全て消えてしまいます。
- 商品を購入後、配送する住所がありません。

## 商品
- アーティスト名、レーベル名、ジャンルがカラムとして商品テーブル内に存在していますが、商品登録時に直接うちこんでいく形にすると、入力ミスが起きやすいです。商品登録時に選択できる形にすると、登録時にミスが無くなります。
- ディスクが複数枚ある場合、どのように管理しますか。
- CDが複数枚あるアルバムの場合、どのように曲名・曲順を管理しますか。
- 管理者idがあるのはなぜでしょうか。
- 商品が削除された場合、該当するレコードはどうなりますか。
- ステータスの「取り扱い」という文言は分かりにくいです。
- 在庫数は商品登録時に打ち込む形でしょうか。その場合商品が入荷されるごとに該当するレコードの在庫数カラムを修正する形になりますがよろしいですか。

## カート
- カートテーブルは商品テーブルとリレーションがあるので、商品テーブルの情報を引っ張ってくることができます。アーティスト名・ジャケット画像・シングル/アルバム名はこのテーブルにカラムとして必要でしょうか。
- 合計金額カラムがありますが、他のテーブルから計算できませんか。
- 現状のままでは、どのユーザーのカートに商品を入れたのかという情報が分かりません。カートがどのユーザーのものなのかを判別できるようにしてください。
- テーブルの名前がカートテーブルなのであれば、注文idではなくカートidの方が望ましいです。

## 決済
- カートテーブルとのリレーションがありますが、購入前と購入後の判別はどうやって行いますか。
- 購入日カラムは必要でしょうか。
- 送料を保存するカラムがありません。
- 配送先情報として、送付先住所のみでは不十分です。宛名と郵便番号の情報を追加してください。

## 購入履歴
- PKが記載されていません。
- 現状のリレーションのままでは、どのユーザーが買ったかが判別できません。どのユーザーが購入したのかを判別できるようにしてください。
- 購入時の枚数、金額を保存しておくカラムがありません。このままでは購入後に商品の値段が上がった場合、購入履歴の値段も上がってしまい実際の金額とデータで齟齬が生まれてしまいます。

------------------------------------------------------------------------------------------------------

# ER図1　問題抽出
## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日がない
- 入荷の管理はどのように行いますか？
- 決済と購入履歴に差がない

## エンドユーザ
- 管理人とリレーションがある
- 論理削除を考慮していない
- 配送先の情報がない

##　商品
- アーティスト名、レーベル名、ジャンルがカラムとして商品テーブル内に存在する
- 曲名がカラムとして商品テーブル内に存在する
- 曲順管理のカラムがない
- 管理人とリレーションがある必要がない
- ディスクが複数枚ある場合に判別ができない
- 商品を削除した場合の論理削除が考慮されていない
- ステータス（在庫あり）に変更
- 在庫数は入荷数 - 購入数で求められるので、必要ない

##　カート
- アーティスト名、ジャケット画像、アルバム名などのカラムがある
- 決済とリレーションがある 
- ユーザーとリレーションがない
- 合計金額は商品の値段を足すのでカラムを持つ必要はない
- 注文IDではなくカートID

## 決済
- ユーザーID、カートIDを持つ必要はない
- 購入日カラムは必要ない
- 宛名と郵便番号がない
- 送料を入れるカラムを作る

##　購入履歴
- PKがない
- どのユーザーが買ったのか判別できない
- 購入時の枚数、金額を保存しておくカラムがない

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

# 研修担当レビュー
合格です！